/* ==UserStyle==
@name Sarnai Stylus
@namespace github.com/titembaatar/sarnai/userStyles/stylus
@homepageURL https://github.com/titembaatar/sarnai
@version 0.1.0
@updateURL https://github.com/titembaatar/sarnai/raw/refs/heads/main/userStyle/stylus/stylus.user.less
@description Mongolian-inspired theme for Stylus
@author Titembaatar
@license MIT

@preprocessor less
@var select lightFlavor "Light Flavor" ["ovol:Ovol*", "khavar:Khavar"]
@var select darkFlavor "Dark Flavor" ["ovol:Ovol", "khavar:Khavar*"]
@var select accentColor "Accent" ["sarnai:Sarnai*", "anis:Anis", "chatsalgan:Chatsalgan", "els:Els", "uvs:Uvs", "nuur:Nuur", "mus:Mus", "yargui:Yargui"]
==/UserStyle== */

@-moz-document url-prefix("moz-extension://"),
  url-prefix("chrome-extension://") {
  :root {
    &[data-ui-theme="light"] {
      #sarnai-theme(@lightFlavor);
    }
    &[data-ui-theme="dark"] {
      #sarnai-theme(@darkFlavor);
    }
  }

  #sarnai-theme(@flavor) {
    @sarnai: @sarnai-theme[@@flavor][@sarnai];
    @anis: @sarnai-theme[@@flavor][@anis];
    @chatsalgan: @sarnai-theme[@@flavor][@chatsalgan];
    @els: @sarnai-theme[@@flavor][@els];
    @uvs: @sarnai-theme[@@flavor][@uvs];
    @mus: @sarnai-theme[@@flavor][@mus];
    @nuur: @sarnai-theme[@@flavor][@nuur];
    @yargui: @sarnai-theme[@@flavor][@yargui];
    @text: @sarnai-theme[@@flavor][@text];
    @subtle: @sarnai-theme[@@flavor][@subtle];
    @muted: @sarnai-theme[@@flavor][@muted];
    @overlay: @sarnai-theme[@@flavor][@overlay];
    @surface: @sarnai-theme[@@flavor][@surface];
    @base: @sarnai-theme[@@flavor][@base];
    @accent: @sarnai-theme[@@flavor][@@accentColor];

    color-scheme: if(@flavor = ovol, light, dark);

    ::selection {
      background-color: fade(@accent, 30%);
    }

    input,
    textarea {
      &::placeholder {
        color: @subtle !important;
      }
    }

    --bg: @surface;
    --fg: @text;
    --c30: @text;
    --c40: @muted;
    --c45: @overlay;
    --c50: @subtle;
    --c60: @subtle;
    --c65: @overlay;
    --c75: @muted;
    --c80: @overlay;
    --c85: @surface;
    --c90: @surface;
    --c95: @base;
    --c97: @base;
    --c98: @surface;
    --c99: @surface;
    --c100: @surface;
    --red1: @anis;
    --accent-1: @accent;
    --accent-2: @accent;
    --accent-3: fade(@accent, 25%);

    .slider {
      --color-on: fade(@accent, 25%);
      --color-off: @overlay;
    }

    :focus {
      --focus-color1: @accent !important;
      --focus-color2: fade(@accent, 25%) !important;
    }

    .active #filters-stats,
    .dirty #save-button,
    .dirty #save-button + button {
      background-color: @accent;
      border-color: @accent;
      color: @surface;
    }
    #header-resizer {
      color: @overlay;
    }
    #message-box-title::before {
      @fade_color: fade(@accent, 67%);
      @svg: escape(
        '<svg version="1.1" viewBox="0 0 34.5 34.5" xmlns="http://www.w3.org/2000/svg"><g transform="translate(1.5 1.5)"><path d="M.68 13.5h.14a.68.68 135 0 0 .68-.68V3.68c0-.375-.012-.988.053-1.357.139-.786.622-2.01 2.27-2.272.37-.06.982-.05 1.357-.05h21.64c.375 0 .987-.009 1.358.049 1.676.26 2.15 1.485 2.279 2.273.06.37.043.982.043 1.357v9.14a.68.68 45 0 0 .68.68h.14a.68.68 45 0 1 .68.68v3.64a.68.68 135 0 1-.68.68h-.14a.68.68 135 0 0-.68.68v9.14c0 .375.017.988-.044 1.358-.13.787-.604 2.013-2.279 2.273-.37.057-.982.05-1.358.05H5.18c-.375 0-.987.007-1.358-.052-1.644-.264-2.128-1.487-2.268-2.272-.066-.37-.054-.982-.054-1.357v-9.14a.68.68 45 0 0-.68-.68H.68a.68.68 45 0 1-.68-.68v-3.64a.68.68 135 0 1 .68-.68z" stroke="@{base}" fill="@{accent}" stroke-linejoin="round" stroke-width="2.25" paint-order="stroke fill markers"/><path d="M2.788 15h1.175a.54.54 135 0 0 .537-.537V5.538c0-.297-.017-.78.024-1.074.094-.66.475-1.72 1.94-1.928.294-.042.777-.036 1.074-.036h16.925c.296 0 .78-.006 1.073.038 1.426.211 1.821 1.268 1.928 1.927.047.292.036.776.036 1.072v8.925a.54.54 45 0 0 .538.538h1.175a.54.54 45 0 1 .537.537v.925a.54.54 135 0 1-.537.538h-1.175a.54.54 135 0 0-.538.537v8.925c0 .297.01.78-.04 1.073-.111.658-.51 1.714-1.925 1.927-.293.044-.776.038-1.072.038H7.538c-.297 0-.78.006-1.074-.037-1.434-.211-1.826-1.27-1.93-1.928-.046-.292-.034-.776-.034-1.073v-8.925A.54.54 45 0 0 3.963 17H2.788a.54.54 45 0 1-.538-.538v-.925A.54.54 135 0 1 2.788 15z" fill="black" stroke-linejoin="round" stroke="@{base}" stroke-width="2" paint-order="stroke fill markers"/><path d="M2.788 15h1.175a.54.54 135 0 0 .537-.537V5.538c0-.297-.017-.78.024-1.074.094-.66.475-1.72 1.94-1.928.294-.042.777-.036 1.074-.036h16.925c.296 0 .78-.006 1.073.038 1.426.211 1.821 1.268 1.928 1.927.047.292.036.776.036 1.072v8.925a.54.54 45 0 0 .538.538h1.175a.54.54 45 0 1 .537.537v.925a.54.54 135 0 1-.537.538h-1.175a.54.54 135 0 0-.538.537v8.925c0 .297.01.78-.04 1.073-.111.658-.51 1.714-1.925 1.927-.293.044-.776.038-1.072.038H7.538c-.297 0-.78.006-1.074-.037-1.434-.211-1.826-1.27-1.93-1.928-.046-.292-.034-.776-.034-1.073v-8.925A.54.54 45 0 0 3.963 17H2.788a.54.54 45 0 1-.538-.538v-.925A.54.54 135 0 1 2.788 15z" fill="@{fade_color}" stroke-linejoin="round" stroke="@{base}" stroke-width="2" paint-order="stroke fill markers"/><path d="M21.715 4.974c-1.156-.414-3.115-.889-5.815-.75-.74.039-1.94.174-2.656.366-3.022.81-4.142 2.93-4.516 4.402-.183.716-.217 1.939-.079 2.666.277 1.462 1.486 3.747 6.737 6.126.675.306 1.823.772 2.29 1.34q.07.085.137.181c.422.603.666 1.937.21 2.487a2.2 2.2 0 0 1-.487.424c-.616.405-1.829.62-2.57.65-.895.034-2.145-.023-3.445-.42-.709-.216-1.458.073-1.716.768l-.659 1.775c-.258.695.008 1.641.68 1.951 1.132.522 3.136 1.104 6.159.815.738-.07 1.93-.262 2.637-.482 3.15-.981 4.36-3.28 4.822-4.747.221-.706.333-1.916.24-2.65-.192-1.514-.978-3.965-3.922-5.497-.657-.342-1.812-.69-2.509-.942-.912-.332-2.091-.853-2.759-1.515-.507-.503-.47-1.826-.072-2.445a2.4 2.4 0 0 1 1.253-.976c.695-.247 1.925-.167 2.653-.03.667.125 1.38.305 1.976.476.712.204 1.473-.141 1.72-.84l.466-1.317c.248-.7-.202-1.608-.9-1.857Z" stroke="@{base}" stroke-width="2" fill="@{accent}" paint-order="stroke fill markers"/></g></svg>'
      );
      background-image: url("data:image/svg+xml,@{svg}");
    }
    [src="moz-extension://8fc71d5e-96b2-44a4-8d6f-ead6ff4d3c56/images/icon/16.png"],
    img[src="/images/icon/128.png"] {
      @fade_color: fade(@accent, 67%);
      @svg: escape(
        '<svg version="1.1" viewBox="0 0 34.5 34.5" xmlns="http://www.w3.org/2000/svg"><g transform="translate(1.5 1.5)"><path d="M.68 13.5h.14a.68.68 135 0 0 .68-.68V3.68c0-.375-.012-.988.053-1.357.139-.786.622-2.01 2.27-2.272.37-.06.982-.05 1.357-.05h21.64c.375 0 .987-.009 1.358.049 1.676.26 2.15 1.485 2.279 2.273.06.37.043.982.043 1.357v9.14a.68.68 45 0 0 .68.68h.14a.68.68 45 0 1 .68.68v3.64a.68.68 135 0 1-.68.68h-.14a.68.68 135 0 0-.68.68v9.14c0 .375.017.988-.044 1.358-.13.787-.604 2.013-2.279 2.273-.37.057-.982.05-1.358.05H5.18c-.375 0-.987.007-1.358-.052-1.644-.264-2.128-1.487-2.268-2.272-.066-.37-.054-.982-.054-1.357v-9.14a.68.68 45 0 0-.68-.68H.68a.68.68 45 0 1-.68-.68v-3.64a.68.68 135 0 1 .68-.68z" stroke="@{base}" fill="@{accent}" stroke-linejoin="round" stroke-width="2.25" paint-order="stroke fill markers"/><path d="M2.788 15h1.175a.54.54 135 0 0 .537-.537V5.538c0-.297-.017-.78.024-1.074.094-.66.475-1.72 1.94-1.928.294-.042.777-.036 1.074-.036h16.925c.296 0 .78-.006 1.073.038 1.426.211 1.821 1.268 1.928 1.927.047.292.036.776.036 1.072v8.925a.54.54 45 0 0 .538.538h1.175a.54.54 45 0 1 .537.537v.925a.54.54 135 0 1-.537.538h-1.175a.54.54 135 0 0-.538.537v8.925c0 .297.01.78-.04 1.073-.111.658-.51 1.714-1.925 1.927-.293.044-.776.038-1.072.038H7.538c-.297 0-.78.006-1.074-.037-1.434-.211-1.826-1.27-1.93-1.928-.046-.292-.034-.776-.034-1.073v-8.925A.54.54 45 0 0 3.963 17H2.788a.54.54 45 0 1-.538-.538v-.925A.54.54 135 0 1 2.788 15z" fill="black" stroke-linejoin="round" stroke="@{base}" stroke-width="2" paint-order="stroke fill markers"/><path d="M2.788 15h1.175a.54.54 135 0 0 .537-.537V5.538c0-.297-.017-.78.024-1.074.094-.66.475-1.72 1.94-1.928.294-.042.777-.036 1.074-.036h16.925c.296 0 .78-.006 1.073.038 1.426.211 1.821 1.268 1.928 1.927.047.292.036.776.036 1.072v8.925a.54.54 45 0 0 .538.538h1.175a.54.54 45 0 1 .537.537v.925a.54.54 135 0 1-.537.538h-1.175a.54.54 135 0 0-.538.537v8.925c0 .297.01.78-.04 1.073-.111.658-.51 1.714-1.925 1.927-.293.044-.776.038-1.072.038H7.538c-.297 0-.78.006-1.074-.037-1.434-.211-1.826-1.27-1.93-1.928-.046-.292-.034-.776-.034-1.073v-8.925A.54.54 45 0 0 3.963 17H2.788a.54.54 45 0 1-.538-.538v-.925A.54.54 135 0 1 2.788 15z" fill="@{fade_color}" stroke-linejoin="round" stroke="@{base}" stroke-width="2" paint-order="stroke fill markers"/><path d="M21.715 4.974c-1.156-.414-3.115-.889-5.815-.75-.74.039-1.94.174-2.656.366-3.022.81-4.142 2.93-4.516 4.402-.183.716-.217 1.939-.079 2.666.277 1.462 1.486 3.747 6.737 6.126.675.306 1.823.772 2.29 1.34q.07.085.137.181c.422.603.666 1.937.21 2.487a2.2 2.2 0 0 1-.487.424c-.616.405-1.829.62-2.57.65-.895.034-2.145-.023-3.445-.42-.709-.216-1.458.073-1.716.768l-.659 1.775c-.258.695.008 1.641.68 1.951 1.132.522 3.136 1.104 6.159.815.738-.07 1.93-.262 2.637-.482 3.15-.981 4.36-3.28 4.822-4.747.221-.706.333-1.916.24-2.65-.192-1.514-.978-3.965-3.922-5.497-.657-.342-1.812-.69-2.509-.942-.912-.332-2.091-.853-2.759-1.515-.507-.503-.47-1.826-.072-2.445a2.4 2.4 0 0 1 1.253-.976c.695-.247 1.925-.167 2.653-.03.667.125 1.38.305 1.976.476.712.204 1.473-.141 1.72-.84l.466-1.317c.248-.7-.202-1.608-.9-1.857Z" stroke="@{base}" stroke-width="2" fill="@{accent}" paint-order="stroke fill markers"/></g></svg>'
      );
      content: url("data:image/svg+xml,@{svg}");
    }

    #message-box.danger {
      #message-box-title {
        background-color: @anis;
        color: @surface;

        &::before {
          @fade_color: fade(@anis, 67%);
          @svg: escape(
            '<svg version="1.1" viewBox="0 0 34.5 34.5" xmlns="http://www.w3.org/2000/svg"><g transform="translate(1.5 1.5)"><path d="M.68 13.5h.14a.68.68 135 0 0 .68-.68V3.68c0-.375-.012-.988.053-1.357.139-.786.622-2.01 2.27-2.272.37-.06.982-.05 1.357-.05h21.64c.375 0 .987-.009 1.358.049 1.676.26 2.15 1.485 2.279 2.273.06.37.043.982.043 1.357v9.14a.68.68 45 0 0 .68.68h.14a.68.68 45 0 1 .68.68v3.64a.68.68 135 0 1-.68.68h-.14a.68.68 135 0 0-.68.68v9.14c0 .375.017.988-.044 1.358-.13.787-.604 2.013-2.279 2.273-.37.057-.982.05-1.358.05H5.18c-.375 0-.987.007-1.358-.052-1.644-.264-2.128-1.487-2.268-2.272-.066-.37-.054-.982-.054-1.357v-9.14a.68.68 45 0 0-.68-.68H.68a.68.68 45 0 1-.68-.68v-3.64a.68.68 135 0 1 .68-.68z" stroke="@{base}" fill="@{anis}" stroke-linejoin="round" stroke-width="2.25" paint-order="stroke fill markers"/><path d="M2.788 15h1.175a.54.54 135 0 0 .537-.537V5.538c0-.297-.017-.78.024-1.074.094-.66.475-1.72 1.94-1.928.294-.042.777-.036 1.074-.036h16.925c.296 0 .78-.006 1.073.038 1.426.211 1.821 1.268 1.928 1.927.047.292.036.776.036 1.072v8.925a.54.54 45 0 0 .538.538h1.175a.54.54 45 0 1 .537.537v.925a.54.54 135 0 1-.537.538h-1.175a.54.54 135 0 0-.538.537v8.925c0 .297.01.78-.04 1.073-.111.658-.51 1.714-1.925 1.927-.293.044-.776.038-1.072.038H7.538c-.297 0-.78.006-1.074-.037-1.434-.211-1.826-1.27-1.93-1.928-.046-.292-.034-.776-.034-1.073v-8.925A.54.54 45 0 0 3.963 17H2.788a.54.54 45 0 1-.538-.538v-.925A.54.54 135 0 1 2.788 15z" fill="black" stroke-linejoin="round" stroke="@{base}" stroke-width="2" paint-order="stroke fill markers"/><path d="M2.788 15h1.175a.54.54 135 0 0 .537-.537V5.538c0-.297-.017-.78.024-1.074.094-.66.475-1.72 1.94-1.928.294-.042.777-.036 1.074-.036h16.925c.296 0 .78-.006 1.073.038 1.426.211 1.821 1.268 1.928 1.927.047.292.036.776.036 1.072v8.925a.54.54 45 0 0 .538.538h1.175a.54.54 45 0 1 .537.537v.925a.54.54 135 0 1-.537.538h-1.175a.54.54 135 0 0-.538.537v8.925c0 .297.01.78-.04 1.073-.111.658-.51 1.714-1.925 1.927-.293.044-.776.038-1.072.038H7.538c-.297 0-.78.006-1.074-.037-1.434-.211-1.826-1.27-1.93-1.928-.046-.292-.034-.776-.034-1.073v-8.925A.54.54 45 0 0 3.963 17H2.788a.54.54 45 0 1-.538-.538v-.925A.54.54 135 0 1 2.788 15z" fill="@{fade_color}" stroke-linejoin="round" stroke="@{base}" stroke-width="2" paint-order="stroke fill markers"/><path d="M21.715 4.974c-1.156-.414-3.115-.889-5.815-.75-.74.039-1.94.174-2.656.366-3.022.81-4.142 2.93-4.516 4.402-.183.716-.217 1.939-.079 2.666.277 1.462 1.486 3.747 6.737 6.126.675.306 1.823.772 2.29 1.34q.07.085.137.181c.422.603.666 1.937.21 2.487a2.2 2.2 0 0 1-.487.424c-.616.405-1.829.62-2.57.65-.895.034-2.145-.023-3.445-.42-.709-.216-1.458.073-1.716.768l-.659 1.775c-.258.695.008 1.641.68 1.951 1.132.522 3.136 1.104 6.159.815.738-.07 1.93-.262 2.637-.482 3.15-.981 4.36-3.28 4.822-4.747.221-.706.333-1.916.24-2.65-.192-1.514-.978-3.965-3.922-5.497-.657-.342-1.812-.69-2.509-.942-.912-.332-2.091-.853-2.759-1.515-.507-.503-.47-1.826-.072-2.445a2.4 2.4 0 0 1 1.253-.976c.695-.247 1.925-.167 2.653-.03.667.125 1.38.305 1.976.476.712.204 1.473-.141 1.72-.84l.466-1.317c.248-.7-.202-1.608-.9-1.857Z" stroke="@{base}" stroke-width="2" fill="@{anis}" paint-order="stroke fill markers"/></g></svg>'
          );
          background: url("data:image/svg+xml,@{svg}") !important;
        }
      }

      #message-box-close-icon i {
        color: var(--c40);
        &:hover {
          color: var(--bg);
        }
      }
    }

    #filters label:hover,
    #filters .filter-selection:hover {
      background-color: @surface;
    }
    .oldUI .disabled h2::after,
    .entry.usercss .style-name-link::after {
      background-color: fade(@accent, 25%);
    }

    /* Syntax highlighting */
    .CodeMirror-activeline-background {
      background: @base;
    }
    .CodeMirror-linenumber {
      color: @muted;
    }
    div.CodeMirror span.CodeMirror-matchingbracket {
      color: @chatsalgan;
    }
    .cm-s-default {
      .cm-string {
        color: @els;
      }
      .cm-qualifier {
        color: @mus;
      }
      .cm-variable-2 {
        color: @text;
      }
      .cm-keyword {
        color: @nuur;
      }
      .cm-atom {
        color: @anis;
      }
      .cm-number {
        color: @chatsalgan;
      }
      .cm-def {
        color: @yargui;
      }
      .cm-tag {
        color: @sarnai;
      }
      .cm-builtin {
        color: @anis;
      }
      .cm-variable-3 {
        color: @chatsalgan;
      }
      .cm-comment {
        color: @subtle;
      }
      .cm-operator {
        color: @els;
      }
      .cm-variable {
        color: @nuur;
      }
      .cm-property {
        color: @yargui;
      }
    }
    button:disabled,
    select:disabled,
    option:disabled,
    select[disabled] > option {
      color: @subtle;
    }
    .applies-to input,
    .applies-to select {
      background: @surface;
      border-color: @surface;
      color: @subtle;
    }
    button {
      color: @text !important;
      background: @base !important;
      border-color: @surface;
      &:hover {
        border-color: @text;
      }
    }
    #save-button[disabled] {
      background: @surface !important;
    }
    #message-box-title {
      color: @text;
    }
    .svg-icon {
      fill: @muted;

      &:hover {
        fill: @muted;
      }
    }
    .onoffswitch input:checked + span {
      background-color: fade(@accent, 25%);

      &::before {
        background-color: @accent;
      }
    }
    #options-title {
      color: @surface;
    }
    h2 {
      color: @accent !important;
    }
    .installed .configure-usercss {
      i {
        color: @accent;
      }

      svg,
      &:hover svg {
        fill: @accent !important;
      }
    }
    #live-reload-install-hint {
      color: @mus;
    }
    #menu.delete {
      header {
        background: fade(@anis, 25%);
      }

      > div,
      [data-cmd="delete"] {
        border-color: @anis;
      }
    }
    .entry.odd {
      background-color: fade(@surface, 25%);
    }
    .updater-icons > :not(.check-update)::after {
      border-color: @els;
      background: @surface;
    }
    .split-btn-menu {
      border-color: @accent;

      > :hover {
        background: fade(@accent, 25%);
      }
    }
    #help-popup .title {
      background: @base;
    }
    #toc li:hover {
      background: fade(@accent, 20%);
    }
    input:invalid {
      background: fade(@anis, 10%);
      color: @anis;
    }
  }
}

/* deno-fmt-ignore */
@sarnai-theme: {
  @ovol:   { @sarnai: #b93d4d; @anis: #cc2929; @chatsalgan: #da730c; @els: #df9b23; @uvs: #4c890f; @nuur: #0a728c; @mus: #12adad; @yargui: #a353c6; @text: #13201b; @subtle: #446f5e; @muted: #81b19e; @overlay: #90bbaa; @surface: #b6d2c7; @base: #dceae4; };
  @khavar: { @sarnai: #f0c3cb; @anis: #ff6b6b; @chatsalgan: #e5951a; @els: #cca24d; @uvs: #80b946; @nuur: #2b879e; @mus: #9deaea; @yargui: #d5b3e5; @text: #dfece7; @subtle: #90bbaa; @muted: #4e7e6b; @overlay: #2d493d; @surface: #21362d; @base: #172620; };
};

