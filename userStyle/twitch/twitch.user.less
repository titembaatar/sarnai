/* ==UserStyle==
@name Sarnai Twitch
@namespace github.com/titembaatar/sarnai/userStyles/twitch
@homepageURL https://github.com/titembaatar/sarnai
@version 0.1.0
@updateURL https://github.com/titembaatar/sarnai/raw/refs/heads/main/userStyle/twitch/twitch.user.less
@description Mongolian-inspired theme for Twitch
@author Titembaatar
@license MIT

@preprocessor less
@var select lightFlavor "Light Flavor" ["ovol:Ovol*", "khavar:Khavar"]
@var select darkFlavor "Dark Flavor" ["ovol:Ovol", "khavar:Khavar*"]
@var select accentColor "Accent" ["sarnai:Sarnai*", "anis:Anis", "chatsalgan:Chatsalgan", "els:Els", "uvs:Uvs", "nuur:Nuur", "mus:Mus", "yargui:Yargui"]
==/UserStyle== */

@-moz-document domain("twitch.tv") {
  @import url("https://python.catppuccin.com/pygments/catppuccin-variables.important.css");

  .tw-root--theme-dark {
    #sarnai-theme(@darkFlavor);
  }
  .tw-root--theme-light {
    #sarnai-theme(@lightFlavor);
  }

  #sarnai-theme(@flavor) {
    @sarnai: @sarnai-theme[@@flavor][@sarnai];
    @anis: @sarnai-theme[@@flavor][@anis];
    @chatsalgan: @sarnai-theme[@@flavor][@chatsalgan];
    @els: @sarnai-theme[@@flavor][@els];
    @uvs: @sarnai-theme[@@flavor][@uvs];
    @mus: @sarnai-theme[@@flavor][@mus];
    @nuur: @sarnai-theme[@@flavor][@nuur];
    @yargui: @sarnai-theme[@@flavor][@yargui];
    @text: @sarnai-theme[@@flavor][@text];
    @subtle: @sarnai-theme[@@flavor][@subtle];
    @muted: @sarnai-theme[@@flavor][@muted];
    @overlay: @sarnai-theme[@@flavor][@overlay];
    @surface: @sarnai-theme[@@flavor][@surface];
    @base: @sarnai-theme[@@flavor][@base];
    @accent: @sarnai-theme[@@flavor][@@accentColor];

    color-scheme: if(@flavor = ovol, light, dark);

    ::selection {
      background-color: fade(@accent, 30%);
    }

    input,
    textarea {
      &::placeholder {
        color: @subtle !important;
      }
    }

    body {
      background-color: @surface;
    }

    &,
    .tw-dialog-layer {
      --color-background-input-focus: @base;
      --color-background-interactable-hover: fade(@surface, 48%);
      --color-background-interactable-alpha-hover: @surface;
      --color-background-interactable-active: @overlay;
      --color-background-button-secondary-active: @overlay;
      --color-background-button-text-default: null !important;
      --color-background-pill-subtle: @subtle;
      --color-background-placeholder: @surface;
      --color-background-selectable: @surface;
      --color-text-input-placeholder: @text;
      --color-border-input: @surface;
      --color-border-tab: @surface;
      --color-text-button-primary: @base;
      --color-text-overlay: @surface;
      --color-text-overlay-alt: @subtle;
      --color-text-overlay-link-hover: @subtle;
      --color-text-base: @text;
      --color-text-alt: @text;
      --color-text-alt-2: @subtle;
      --color-text-interactable-selected: @base;
      --color-text-interactable-inverted: @surface;
      --color-background-alt-2: @base;
      --color-text-tag: @subtle;
      --color-background-button-secondary-default: @base;
      --color-background-button-primary-hover: darken(@accent, 5%);
      --color-background-button-secondary-hover: @surface;
      --color-background-button-overlay-secondary-default: fade(@text, 13%);
      --color-background-tag-default: @surface;
      --color-background-tag-hover: @overlay;
      --color-background-float: @base;
      --color-background-body: @surface;
      --color-background-base: @base;
      --color-background-alt: @base;
      --color-background-input: @base;
      --color-brand-muted-cupcake: @sarnai;
      --color-brand-muted-mint: @uvs;
      --color-brand-muted-sky: @mus;
      --color-brand-muted-blush: @chatsalgan;
      --color-brand-muted-canary: @chatsalgan;
      --color-brand-muted-lavender: @yargui;
      --color-brand-muted-mustard: @els;
      --color-brand-muted-emerald: @uvs;
      --color-brand-muted-coral: @chatsalgan;
      --color-brand-muted-ocean: @nuur;
      --color-brand-accent-grape: @yargui;
      --color-brand-accent-dragonfruit: @sarnai;
      --color-brand-accent-carrot: @chatsalgan;
      --color-brand-accent-sun: @chatsalgan;
      --color-brand-accent-lime: @uvs;
      --color-brand-accent-turquoise: @mus;
      --color-brand-accent-eggplant: @yargui;
      --color-brand-accent-wine: @sarnai;
      --color-brand-accent-slime: @uvs;
      --color-brand-accent-seafoam: @uvs;
      --color-brand-accent-cherry: @anis;
      --color-brand-accent-marine: @nuur;
      --color-brand-accent-seaweed: @mus;
      --color-brand-accent-fiji: @uvs;
      --color-brand-accent-blueberry: @nuur;
      --color-brand-accent-arctic: @mus;
      --color-brand-accent-highlighter: @els;
      --color-brand-accent-flamingo: @sarnai;
      --color-brand-accent-ruby: @anis;
      --color-brand-accent-punch: @sarnai;
      --color-brand-accent-creamsicle: @els;
      --color-red: @anis;
      --color-red-darker: @anis;
      --color-orange: @chatsalgan;
      --color-yellow: @els;
      --color-green: @uvs;
      --color-green-darker: @uvs;
      --color-blue: @nuur;
      --color-prime-blue: @nuur;
      --color-magenta: @sarnai;
      --color-error: @anis;
      --color-warn: @els;
      --color-success: @uvs;
      --color-white: @text;
      --color-black: @base;
      --color-info: @nuur;
      --color-twitch-purple: @accent;
      --color-twitch-purple-4: @accent;
      --color-twitch-purple-5: @accent;
      --color-twitch-purple-6: @accent;
      --color-twitch-purple-7: @accent;
      --color-twitch-purple-8: @accent;
      --color-twitch-purple-9: @accent;
      --color-twitch-purple-10: @accent;
      --color-twitch-purple-11: @accent;
      --color-twitch-purple-12: @accent;
      --color-orange-7: @els;
      --color-orange-8: @els;
      --color-orange-9: @els;
      --color-orange-10: @els;
      --color-orange-11: @els;
      --color-orange-12: @els;
      --color-orange-13: @els;
      --color-yellow-6: @chatsalgan;
      --color-yellow-7: @chatsalgan;
      --color-yellow-8: @chatsalgan;
      --color-yellow-9: @chatsalgan;
      --color-yellow-10: @chatsalgan;
      --color-yellow-11: @chatsalgan;
      --color-yellow-12: @chatsalgan;
      --color-yellow-13: @chatsalgan;
      --color-yellow-14: @chatsalgan;
      --color-yellow-15: @chatsalgan;
      --color-green-5: @uvs;
      --color-green-6: @uvs;
      --color-green-7: @uvs;
      --color-green-8: @uvs;
      --color-green-9: @uvs;
      --color-green-10: @uvs;
      --color-green-11: @uvs;
      --color-green-12: @uvs;
      --color-green-13: @uvs;
      --color-green-14: @uvs;
      --color-green-15: @mus;
      --color-cyan-9: @nuur;
      --color-cyan-10: @nuur;
      --color-cyan-11: @nuur;
      --color-cyan-12: @nuur;
      --color-cyan-13: @nuur;
      --color-cyan-14: @nuur;
      --color-cyan-15: @mus;
      --color-blue-4: @nuur;
      --color-blue-5: @nuur;
      --color-blue-6: @nuur;
      --color-blue-7: @nuur;
      --color-blue-8: @nuur;
      --color-blue-9: @nuur;
      --color-blue-10: @mus;
      --color-blue-11: @mus;
      --color-blue-12: @mus;
      --color-blue-14: @mus;
      --color-magenta-5: @sarnai;
      --color-magenta-6: @sarnai;
      --color-magenta-7: @sarnai;
      --color-magenta-8: @sarnai;
      --color-magenta-9: @sarnai;
      --color-magenta-10: @sarnai;
      --color-magenta-11: @sarnai;
      --color-magenta-12: @sarnai;
      --color-magenta-14: @sarnai;
      --color-red-4: @accent;
      --color-red-5: @accent;
      --color-red-6: @accent;
      --color-red-7: @accent;
      --color-red-8: @accent;
      --color-red-9: @accent;
      --color-red-10: @anis;
      --color-red-11: @chatsalgan;
      --color-red-12: @chatsalgan;
      --color-red-14: @chatsalgan;
      --color-twitter: @nuur;
      --color-facebook: @nuur;
      --color-reddit: @chatsalgan;
      --color-snapchat: @els;
      --color-instagram: @nuur;
      --color-youtube: @anis;
      --color-paypal: @nuur;
      --color-paypal-blue: @nuur;
      --color-paypal-yellow: @els;
      --color-venmo: @nuur;
      --color-vk: @nuur;
      --color-amazon: @els;
      --color-background-button-text-hover: @surface;
      --color-text-accessible-red: @accent;
      --color-border-input-checkbox: @subtle;
      --color-border-input-checkbox-hover: @text;
      --color-text-label: @text;
      --color-border-input-hover: @surface;
      --color-opac-b-14: @base;
      --color-text-button-overlay: @text !important;
      --color-background-progress: @surface;
      --color-background-range-overlay-fill: @text !important;
      --color-text-button-overlay-hover: @text !important;
      --color-text-tooltip: @surface !important;
      --color-background-tooltip: @text !important;
      --color-hinted-grey-2: @surface;
      --color-hinted-grey-5: @surface;
      --color-hinted-grey-8: @subtle;
      --color-hinted-grey-12: @subtle;
      --color-hinted-grey-15: @text;
      --color-background-overlay-alt: fade(@base, 60%);
      --color-background-button-overlay-primary-hover: @text;
      --color-background-button-overlay-text-hover: @base;
      --color-border-overlay: @surface;
      --color-border-base: @surface;
      --color-background-button-disabled: @surface;
      --color-text-button-disabled: @subtle;
      --color-background-toggle-handle: @text;
      --color-border-toggle: @text;
      --color-border-toggle-hover: @text;
      --color-background-toggle-checked: @base;
      --color-background-input-checkbox-checked-background: @base;
      --color-border-balloon-overlay: @surface;
      --color-opac-gd-1: fade(@surface, 35%);

      & when (@flavor = latte) {
        --color-white: @surface;
        --color-black: @text;
        --color-hinted-grey-12: @base;
        --color-text-pill: @surface;
        --color-text-overlay-link-hover: @surface;
        --color-background-overlay-alt: fade(@text, 60%);
        --color-text-button-destructive: @surface;
        --color-text-button-overlay: @surface !important;
      }
    }

    --color-text-link: @accent;
    --color-text-link-active: darken(@accent, 5%);
    --color-text-link-focus: darken(@accent, 5%);
    --color-text-link-hover: darken(@accent, 5%);
    --color-text-link-visited: @accent;

    &,
    [class*="ScAccentRegionCssVars"] {
      --color-accent: @accent;
    }
    /* Hardcoded accent color */
    [style="color: rgb(160, 84, 255);"] {
      color: @accent !important;
    }

    /* `Pinned message` popup */

    div.pinned-chat__pinned-by svg {
      color: @text;
    }

    p.pinned-chat__message {
      span {
        color: @text !important;
      }

      a {
        color: @accent;
      }
    }

    /* `Intended for certain audiences` label */

    div[data-a-target="content-classification-warning-disclosure-overlay"] p {
      color: @text !important;
    }

    /* `Hype Train` popup */

    div.hype-train-progress-bar-info-view__level-container p,
    div.hype-train-approaching-view__leftSide p,
    div.hype-train-expanded-layout p,
    div.hype-train-expanded-layout svg {
      color: @text;
    }

    path[d="m18 17 4-4V2H6v15h4v4l4-4h4zM12 6h2v6h-2V6zm7 0h-2v6h2V6z"] {
      fill: @base;
    }

    /* `Is video buffering?` warning */

    div.low-latency-notification {
      p {
        color: @text;
      }
      border-color: @accent;
    }

    /* `Includes paid promotion` label */

    div.disclosure-card {
      p,
      svg,
      a {
        color: @text;
      }
      background: fade(@base, 80%);
    }

    /* Raiding popup */

    div[data-test-selector="raid-banner"] {
      color: @text;
    }

    /* `Predict with Channel Points` popup */

    div[data-test-selector="expanded-content"] p,
    p[data-test-selector="community-prediction-highlight-header__top-predictors"],
    p[data-test-selector="community-prediction-highlight-body__outcome-title"] {
      color: @text;
    }

    /* TODO: ensure that the poll does not default to this */
    div[data-test-selector="header-content"] p {
      color: @text !important;
    }

    div.channel-points-icon svg,
    div[data-test-selector="header-content"] span,
    div[data-test-selector="community-prediction-highlight-body__outcome-points"]
      span {
      color: @accent;
    }

    button[data-test-selector="community-prediction-highlight-header__how-to-play"],
    button[data-test-selector="community-prediction-highlight-header__terms-and-conditions"],
    button[data-test-selector="community-prediction-highlight-header__send-feedback"],
    button[data-test-selector="community-prediction-highlight-header__dismiss-message"] {
      color: @text;
    }

    /* ??? */

    div.happening-now-disable-prompt p {
      color: @text !important;
    }

    /* Gifting sub popup */

    div.mystery-gift-chat-banner {
      span {
        color: @accent;
      }

      p {
        color: @text;
      }
    }

    /* VOD metadata */

    div.tw-media-card-stat when not(@flavor = latte) {
      --color-text-overlay: @text;
    }

    /* Seekbar segment */

    div[data-test-selector="seekbar-interaction-area__interactionArea"]
      span[data-test-selector="seekbar-segment__segment"] {
      background: @accent !important;
    }

    /* Seekbar DMCA muted segment */

    div[data-test-selector="seekbar-interaction-area__interactionArea"]
      span[data-test-selector="seekbar-segment__segment"][style*="background-color: rgba(212, 73, 73, 0.5);"] {
      background: @anis !important;
    }

    /* Seekbar buffered segment */

    div[data-test-selector="seekbar-interaction-area__interactionArea"]
      span[data-test-selector="seekbar-segment__segment"][style*="background-color: rgba(255, 255, 255, 0.85);"] {
      background: @subtle !important;
    }

    /* Recent VOD title */

    div.player-overlay-background h4 {
      color: @subtle !important;
    }

    a.offline-recommendations-video-card p {
      color: @text;
    }

    /* Offline screen follow panel */

    div[data-test-selector="follow-panel-overlay"] p {
      color: @text !important;
    }

    div[data-test-selector="follow-panel-overlay"] button div {
      color: @base !important;
    }

    /* Front page warning sign */

    div.content-overlay-gate__content[data-a-target="player-overlay-content-gate"]
      div.content-overlay-icon
      svg {
      color: @anis;
    }

    /* Front page age warning */

    div.content-overlay-gate__content[data-a-target="player-overlay-content-gate"]
      p.content-overlay-gate__allow-pointers {
      color: @anis !important;
    }

    /* Front page age selector */

    div[data-a-target="player-overlay-age-gate-form"] select {
      color: @text;
    }

    /* Followers list usercard */

    div[data-a-target="user-card-modal"] p when not(@flavor = latte) {
      --color-text-overlay: @text;
    }

    /* Usercard mod log tabs */

    .viewer-card-mod-drawer-tab--active {
      box-shadow: 0 calc(var(--border-width-default) * -3) 0 @accent inset
        !important;
    }

    /* Usercard header */

    .viewer-card-header__overlay {
      background-color: fade(@base, 60%) !important;
    }

    /* PiP username */

    div.mini-overlay__title span {
      color: @text;
    }

    /* Viewercard username */

    div.viewer-card-header__display-name h4 {
      color: @accent !important;
    }

    /* Viewercard metadata */

    div.viewer-card-header__display-name svg:not(button svg) {
      color: @text;
    }

    div.viewer-card-header__display-name p {
      color: @text !important;
    }

    /* Extension name */

    div[aria-describedby="popover-extensions-body"] h6 {
      color: @text;
    }

    /* Extension description */

    div.extensions-popover-view-layout__body p {
      color: @text;
    }

    /* Extension service buttons */

    div.extensions-popover-view-layout__body svg {
      color: @subtle;
    }

    div.extensions-popover-view-layout__body div {
      color: @text;
    }

    /* Extension overlay */

    .extension-view__iframe {
      color-scheme: light;
    }

    .carousel-metadata {
      background: @base;
    }
    .carousel-metadata--fadeout {
      background: @base;
    }
    .chat-line__timestamp {
      color: @subtle;
    }
    .chat-line__message-body--highlighted {
      background-color: @accent;
      color: @base;
      border-color: @accent;
    }
    .chat-scrollable-area__message-container {
      background-color: @base;
    }
    .side-nav-card__link:hover,
    .side-nav-card__link:focus {
      background: @surface !important;
    }
    .footer {
      background: @base;
    }
    .whispers-list-item--selected,
    .whispers-list-item:hover {
      background-color: @surface;
    }
    .thread-header__title-bar-container--focused {
      background-color: @base;
    }
    .thread-header__title-bar-container {
      background: @base;
    }
    .thread-header__click-area:focus .thread-header__title-bar-container {
      background-color: @base;
    }
    .navigation-link {
      color: @text;

      &:hover,
      &.active {
        color: @accent;
      }
    }

    .navigation-link__active-indicator {
      background-color: @accent !important;
    }
    .chat-room {
      background: @base;
    }
    div.pinned-chat__highlight-card div.highlight {
      background: @base;
    }

    .server-message-alert {
      border-color: @anis !important;
      border-left-color: @anis !important;
    }

    .server-message-alert__icon {
      color: @anis !important;
    }

    /* Predictions */
    .fixed-prediction-button {
      color: @base !important;

      .channel-points-icon svg {
        color: @base !important;
      }

      &.fixed-prediction-button--disabled {
        color: @text !important;

        .channel-points-icon svg {
          color: @text !important;
        }
      }
    }
    [style*="rgb(255, 255, 255)"] {
      color: @surface !important;
      .channel-root,
      .channel-info-content,
      .chat-author__display-name,
      .chatter-name,
      &[data-a-target="chat-message-username"],
      &.message-author__display-name {
        color: @text !important;
      }
    }

    .chatter-name [style*="rgb(255, 255, 255)"] {
      color: @text !important;
    }

    [style="color: rgb(56, 122, 255);"] {
      color: @nuur !important;
    }
    [style="color: rgb(245, 0, 155);"] {
      color: @sarnai !important;
    }

    /* FrankerFaceZ uptime timer */
    .ffz-il-tooltip__container {
      p,
      figure.ffz-i-flag {
        color: @text;
      }
    }

    [data-a-target="preview-card-image-link"] when (@flavor = latte) {
      .tw-media-card-stat,
      p,
      figure.ffz-i-flag {
        color: @surface;
      }
    }

    /* VOD chapters */
    .preview-card-game-balloon__content .tw-interactable:hover {
      p,
      figure {
        color: @text !important;
      }
      .media-row__image-play-overlay {
        background-color: fade(@surface, 80%) !important;
      }
    }

    .fixed-prediction-button--blue,
    [style*="background-color: rgb(56, 122, 255);"],
    [style*="background: rgb(56, 122, 255);"] {
      background-color: @nuur !important;
    }
    .fixed-prediction-button--pink,
    [style*="background-color: rgb(245, 0, 155);"],
    [style*="background: rgb(245, 0, 155);"] {
      background-color: @sarnai !important;
    }

    input[disabled] {
      background-color: @surface;
    }
    .chat-wysiwyg-input__placeholder {
      color: @subtle;
    }

    button[aria-label="Play"],
    button[aria-label="Pause"] {
      + div svg {
        color: @subtle;
      }
    }

    [data-a-target="video-ad-label"],
    [data-a-target="video-ad-countdown"] {
      color: @text !important;
    }

    /* Override for logo icon */
    .tw-animated-glitch-logo {
      --color-white: @base;
    }

    /* Modals */
    .modal__content {
      color: @text;
    }

    /* Leaderboard highlighted username */
    .bits-leaderboard-expanded-top-three-entry__marquee-username,
    .channel-leaderboard-header-runner-up-entry__username,
    .bits-leaderboard-expanded-top-three-entry__username {
      div {
        color: @surface !important;
      }
    }

    .channel-leaderboard-header-rotating__expand-grabber {
      background: @surface !important;
    }

    /* Privacy center */

    .privacy-center-root__number-item {
      background: @accent;
      color: @surface;
    }

    .privacy-center-accordion {
      border-color: @accent;
    }

    .privacy-center-home-tabs {
      color: @surface !important;
      &[aria-selected="true"],
      &:hover {
        color: @overlay !important;
      }
    }

    .home-page__title-container,
    .tw-responsive-wrapper {
      svg path {
        &[fill="#fff"],
        &[fill="#FFF"] {
          fill: transparent !important;
        }
      }
    }

    .home-page__title {
      color: @surface !important;
    }

    .tw-balloon {
      .tw-callout-message__title {
        color: var(--color-text-variable) !important;
      }

      .tw-callout__close div.tw-svg {
        fill: var(--color-text-variable) !important;
      }
    }

    /* Home page tips and analytics */

    .analytics-tip-card,
    .creator-home-card__icon .creator-home-card__icon-svg {
      color: @surface !important;
      button {
        color: @surface !important;
      }
    }

    .creator-home-welcome-title__overlay-text,
    .analytics-highlights-chart-tooltip__label--dark {
      color: @surface !important;
    }

    .creator-home-focus-position {
      background: linear-gradient(@accent, @surface);
    }

    /* Shield mode tray */

    .shield-mode-icon svg path {
      fill: @chatsalgan;
    }

    .tray-highlight,
    .chat-input-highlight,
    .shield-mode-shortcut__btn {
      border-color: @chatsalgan !important;
    }

    /* Shield mode mod view button */

    .shield-mode-shortcut__inner,
    .shield-mode-view-toggle--active {
      color: @surface;
      background: @chatsalgan;
    }

    /* Channel points reward cost */

    .reward-icon__cost {
      color: @text !important;
      background: fade(@base, 60%) !important;

      & when (@flavor = latte) {
        color: @surface !important;
        background: fade(@text, 60%) !important;
      }
    }

    /* Directory banner */

    .directory-header-new__banner-cover {
      background:
        linear-gradient(0deg, @surface, fade(@base, 25%)),
        linear-gradient(90deg, @surface, fade(@base, 25%));
    }

    .home-video when not(@flavor = latte) {
      --color-text-overlay: @text;
    }

    /* Cookies and Advertising Choices */

    .top-bar--pointer-enabled .consent-banner__content--gdpr-v2,
    .consent-banner {
      a,
      button,
      p {
        color: @surface !important;
      }

      button:not([data-a-target="consent-banner-accept"]) {
        background-color: fade(@surface, 10%);
      }
    }

    /* Mod view changelog shadow */

    .mod-view-whats-new-list--more-posts-to-see::after {
      background-image: linear-gradient(transparent, @base);
    }

    /* Unban requests */

    .unban-requests-tabs__load-previous {
      background-image: linear-gradient(@base, fade(@base, 0%));
    }

    .unban-requests-action-button__selected {
      color: @surface !important;
      background: @accent;
    }

    .unban-requests-tabs__load-previous > div {
      background: @surface;
    }

    /* Timestamps, mod actions and deleted messages */

    .targeted-mod-action,
    .message__timestamp,
    .vcml-message__timestamp,
    .chat-line__message--deleted {
      color: @subtle;
    }

    /* Suspicious user banner in usercard */

    .low-trust-user-banner div {
      color: @text !important;
    }

    /* Emote preview */

    .chat-input__preview__text {
      color: @surface !important;
    }

    /* Twitch logo in onboarding screen */

    .onboarding-modal-splash-screen__container {
      svg path[fill="#fff"] {
        fill: transparent !important;
      }
    }

    /* Stream category subtitle in onboarding screen */

    .onboarding-modal-main-list-live-channels-live-channel-card__sub-title {
      color: @subtle !important;
    }

    /* Subscriptions */

    .tier-display {
      color: @yargui;
    }

    .tier-display__prime {
      color: @nuur;
    }

    .sub-badge-progress p,
    .sub-badge-progress__all-badges--text,
    .expired-sub-message {
      color: @subtle !important;
    }

    .sunlight-modal__content {
      color: @text !important;
    }

    .tw-loading-spinner {
      color: @text;
    }

    .video-player__container, .clips-root__main {
      & when not(@flavor = latte) {
        --color-text-overlay: @text;
      }
    }

    .vertical-selector a:hover {
      background: darken(@accent, 5%);
    }

    /* Chat popouts */

    div[data-test-selector="chat-private-callout-queue__callout-container"] {
      .tw-callout__close > button {
        color: @surface !important;
      }
      div[data-a-target="tw-progress-bar-animation"] {
        background: @surface;
      }
      div.tw-progress-bar {
        background: fade(@surface, 10%);
      }
      button .tw-svg, svg {
        fill: @surface;
      }
    }

    /* SUBtember subscribe button */

    .gift-subtember-button {
      background: @mus;
    }

    .player-controls when (@flavor = latte) {
      --color-text-button-overlay: @surface !important;
      --color-background-range-overlay-fill: @surface !important;
      --color-text-button-overlay-hover: @base !important;
    }

    /* Clips watch live prompt */

    .watch-live-prompt {
      h5 {
        color: @text !important;
      }
      h6 {
        color: @subtle !important;
      }
    }

    .clips-top-nav-user {
      .clips-top-nav-user__username,
      .tw-svg {
        color: @text !important;
      }
    }

    /* AutoMod caught message */

    .chat-line__message--alert {
      border-color: @anis !important;
      background-color: @surface !important;
    }

    .text-fragment--moderated-highlight {
      color: @text !important;
      background-color: fade(@anis, 30%) !important;
    }

    /* Activity feed icons */

    .activity-feed-v2-event--follow {
      color: @sarnai;
    }

    .activity-feed-v2-event--subscription {
      color: @nuur;
    }

    .activity-feed-v2-event--reward-request,
    .activity-feed-v2-event--raiding {
      color: @els;
    }

    .activity-feed-v2-event--multi-stage {
      color: @mus;
    }

    .activity-feed-v2-event--creator-goal {
      color: @uvs;
    }

    /* Chat message highlights */

    div[style*="border"] {
      /* Suspicious user */
      &[style*="rgb(255, 130, 128)"] {
        border-color: @anis !important;
      }

      /* First message */
      &[style*="rgb(255, 117, 230)"] {
        border-color: @sarnai !important;
      }

      /* Returning chatter */
      &[style*="rgb(0, 163, 163)"] {
        border-color: @mus !important;
      }

      /* Raider */
      &[style*="rgb(245, 245, 0)"] {
        border-color: @els !important;
      }

      /* Mention */
      &[style*="rgb(173, 173, 184)"] {
        border-color: @text !important;
      }

      /* Moderator */
      &[style*="rgb(0, 168, 101)"] {
        border-color: @uvs !important;
      }

      /* VIP */
      &[style*="rgb(219, 0, 179)"] {
        border-color: @yargui !important;
      }

      /* Subscriber */
      &[style*="rgb(82, 139, 255)"] {
        border-color: @nuur !important;
      }
    }

    /* "Account suspended or deactivated" status banner */

    .viewer-card-header__account-status-banner {
      color: @text;
      background-color: @base !important;
    }

    /* Chat mentions */

    .mention-fragment {
      color: @text;
      background-color: @surface;

      &.mention-fragment--recipient {
        color: @surface;
        background-color: @text;
      }
    }

    /* Clips sharing buttons */

    .converter(@bg, @fg: @surface) {
      color: @fg !important;
      background-color: @bg;

      &:not([disabled]):hover {
        background-color: darken(@bg, 5%);
      }
    }

    .converter-youtube-button button {
      .converter(@anis);
    }

    .converter-instagram-button button {
      .converter(@yargui);
    }

    .share-tiktok-button {
      background-image: linear-gradient(135deg, @mus, @anis);

      button {
        color: @text !important;
        background-color: @base;

        &:not([disabled]):hover {
          background-color: @surface;
        }
      }
    }

    .clips-root__main .seekbar-bar {
      background-color: @surface !important;
    }

    /* Clips editor timeline */

    .draggable-slider__overlay--purple {
      border-color: @accent;
      background-color: fade(@accent, 30%);
    }

    .draggable-slider-handle--purple {
      background-color: @accent;
      --color-white: @surface;
    }

    .clip-editor-timeline-background {
      background-color: @surface;
    }

    .clip-editor-slider-popover {
      color: @surface;
      background-color: @text;
    }

    /* Pinned message shadow */
    .pinned-chat__scrollable-area__gradient {
      background-image: linear-gradient(180deg, transparent 60%, @base);
    }

    /* What's new mod view icon */
    .whats-new-button--has-new-posts {
      color: @uvs;
    }

    /* Guest star thumbnail border */
    .guest-star-live-card-border {
      background-image: linear-gradient(180deg, @yargui 0, @mus 61.98%, @nuur);
    }

    /* Guest Star circle buttons */

    .guest-star-circle-button:not(
      .guest-star-circle-button--inverted,
      .guest-star-circle-button--alert
    ),
    .guest-star-circle-button__dropdown:not(
      .guest-star-circle-button__dropdown--inverted,
      .guest-star-circle-button__dropdown--alert
    ) {
      background-color: @base;
      &:hover {
        background-color: var(--color-hinted-grey-5);
      }

      & when (@flavor = latte) {
        --color-hinted-grey-5: @subtle;
        color: @surface;
        background-color: @text;
        &:hover {
          background-color: var(--color-hinted-grey-5);
        }
      }
    }

    .guest-star-circle-button--inverted,
    .guest-star-circle-button__dropdown--inverted {
      color: @surface;
      border-color: @surface;
      & when (@flavor = latte) {
        color: @text;
        border-color: @text;
      }
    }

    /* End Stream Together button */
    .guest-star-circle-button--alert {
      color: @surface;
    }

    /* Guest Star What's new icon */
    .notification-icon--green svg {
      fill: @uvs;
    }

    .video-player__overlay when (@flavor = latte) {
      --color-text-pill: @surface;
    }

    /* Polls */
    .community-highlight-stack__card {
      .container--default {
        background-color: @surface;
      }

      .container--winner p {
        color: @surface !important;
      }

      .choice-progress__fill--default {
        background-color: @surface;
      }

      .top-poll-community-points-contributor {
        color: @uvs;
      }
    }

    /* Channel points rewards - Learn more */
    [class*="rewardsLearnMoreHeadersDark"],
    [class*="rewardsLearnMoreExpandedView"] {
      background-color: @surface;
    }

    .footer__link, .footer__link:hover {
      color: @text;
    }

    .footer__glitch
      path[d="m18 17 4-4V2H6v15h4v4l4-4h4zM12 6h2v6h-2V6zm7 0h-2v6h2V6z"] {
      fill: @text;
    }

    .bits-leaderboard-expanded__collapse {
      svg {
        fill: @surface;
      }
    }

    .tw-channel-status-text-indicator {
      color: @surface;
    }

    .player-captions-container {
      .player-captions-container__caption-line[style*="; color: rgb(255, 255, 255)"] {
        color: if(@flavor = latte, @surface, @text) !important;
      }
    }
  }
}

@-moz-document domain("dashboard.twitch.tv") {
  .tw-root--theme-dark {
    #sarnai-theme(@darkFlavor);
  }
  .tw-root--theme-light {
    #sarnai-theme(@lightFlavor);
  }

  #sarnai-theme(@flavor) {
    @sarnai: @sarnai-theme[@@flavor][@sarnai];
    @sarnai: @sarnai-theme[@@flavor][@sarnai];
    @sarnai: @sarnai-theme[@@flavor][@sarnai];
    @yargui: @sarnai-theme[@@flavor][@yargui];
    @anis: @sarnai-theme[@@flavor][@anis];
    @anis: @sarnai-theme[@@flavor][@anis];
    @chatsalgan: @sarnai-theme[@@flavor][@chatsalgan];
    @els: @sarnai-theme[@@flavor][@els];
    @uvs: @sarnai-theme[@@flavor][@uvs];
    @mus: @sarnai-theme[@@flavor][@mus];
    @mus: @sarnai-theme[@@flavor][@mus];
    @nuur: @sarnai-theme[@@flavor][@nuur];
    @nuur: @sarnai-theme[@@flavor][@nuur];
    @yargui: @sarnai-theme[@@flavor][@yargui];
    @text: @sarnai-theme[@@flavor][@text];
    @text: @sarnai-theme[@@flavor][@text];
    @subtle: @sarnai-theme[@@flavor][@subtle];
    @subtle: @sarnai-theme[@@flavor][@subtle];
    @muted: @sarnai-theme[@@flavor][@muted];
    @muted: @sarnai-theme[@@flavor][@muted];
    @overlay: @sarnai-theme[@@flavor][@overlay];
    @overlay: @sarnai-theme[@@flavor][@overlay];
    @surface: @sarnai-theme[@@flavor][@surface];
    @surface: @sarnai-theme[@@flavor][@surface];
    @base: @sarnai-theme[@@flavor][@base];
    @base: @sarnai-theme[@@flavor][@base];
    @accent: @sarnai-theme[@@flavor][@@accentColor];

    .edit-video-properties-modal__content {
      --color-background-float: @surface;
    }

    article button {
      --color-fill-current: @surface !important;
      --color-background-button-overlay: @surface !important;
      --color-background-button-overlay-hover: @surface !important;
      --color-background-button-icon-overlay-hover: fade(@surface, 13%);
      --color-background-button-overlay-primary-hover: fade(
        @surface,
        13%
      ) !important;
    }

    .simplebar-content {
      background-color: @base;
    }

    .scrollable-area--suppress-scroll-x > .simplebar-scroll-content,
    .scrollable-area--suppress-scroll-x
      > .simplebar-scroll-content
      > .simplebar-content {
      background-color: @surface;
    }

    .sunlight-page .simplebar-scroll-content .simplebar-content {
      background-color: @surface;
    }
    .info_box_row {
      background: @base;
    }
    .info_box_row_label {
      color: @text;
    }
    .video-card-thumbnail__video-state-overlay {
      color: @text !important;
      background: fade(@base, 80%) !important;
    }

    /* Twitch alerts */

    .alerts-home-main-wrapper {
      color: @text !important;
    }

    .alerts-home-scrollable-area,
    .alert-boxes-section-border-container {
      color: @text !important;
      .simplebar-content {
        background: @base !important;
      }
      .alert-set-card {
        background: @base !important;
      }
    }

    /* Analytics */

    .top-stats-tab--active {
      color: @accent !important;
      box-shadow: 0 calc(var(--border-width-default) * -3) 0 @accent inset;
      .top-stats-tab__title {
        color: @accent !important;
      }
    }

    .top-stats-tab:hover {
      box-shadow: inset 0 -2px 0 @accent, 0 4px 6px -4px @accent;
      background: @surface !important;
    }

    /* Stream Manager */

    .stream-manager--page-view {
      .mosaic-tile .simplebar-content,
      .stream-manager-edit-mode-item,
      .stream-manager-edit-mode-stat-item {
        background: @base !important;
      }
    }

    /* Autohost / managed channels list */

    .dashboard-centered-page {
      --color-background-alt: @surface;
      .simplebar-scroll-content,
      .simplebar-content {
        background: transparent !important;
      }

      .autohost-list-item--hovered {
        color: @text;
        background: @surface;

        button svg path {
          fill: @text !important;
        }
      }
    }

    /* Research */

    .time-to-stream-tab--active {
      box-shadow: 0 calc(var(--border-width-default) * -3) 0 @accent inset;
    }

    /* Collection thumbnails */

    .collection-preview-image__wrapper {
      color: @text !important;
      background: linear-gradient(
        90deg,
        fade(@base, 0%),
        fade(@base, 100%) 75%
      );
    }

    /* AutoMod shadow */

    .automod-level-controls__categories--bottom::after {
      background-image: linear-gradient(fade(@base, 0%), @base);
    }

    /* Tables */

    .tw-table,
    .tw-table-heading {
      border-color: @surface;
      background: @base;
    }

    /* Achievements & activity page */

    .ach-sb,
    .activity-page__scrollable .simplebar-content {
      background: @base !important;
    }

    /* Clips player background */

    .clips-player-container {
      background: @base;
    }

    .clmgr-table__row {
      &:hover {
        background: @surface !important;
      }
    }

    /* Announcements button */

    .announcements-icon--green svg {
      fill: @uvs !important;
    }

    /* Achievements */

    .ach-q-item {
      &.ach-q-item--expanded {
        box-shadow: 0 0 0 1px @accent;
      }

      [data-test-selector="is-affiliate-banner"] {
        span,
        a {
          color: @surface !important;
        }
      }

      .quest-progress-bars__incomplete {
        background-color: @surface !important;
      }
    }

    [data-target="video-card"] {
      background: @base !important;
    }

    /* Stream Manager quick actions */

    .quick-action,
    .quick-actions-store-card-layout--top {
      color: @surface;

      &.quick-action--purple,
      &.quick-actions-store-card-layout--purple {
        background-color: @yargui;
      }

      &.quick-action--blue,
      &.quick-actions-store-card-layout--blue {
        background-color: @nuur;
      }

      &.quick-action--magenta,
      &.quick-actions-store-card-layout--magenta {
        background-color: @sarnai;
      }

      &.quick-action--green,
      &.quick-actions-store-card-layout--green {
        background-color: @uvs;
      }

      &.quick-action--red,
      &.quick-actions-store-card-layout--red {
        background-color: @anis;
      }

      &.quick-action-layout--disabled {
        color: @subtle;
        background-color: @surface;
      }
    }

    /* Stream Manager statistics */
    .sunlight-tile {
      background-color: @base;
    }

    .creator-home-card__icon-background--yellow {
      background-color: @els;
    }
  }
}

@-moz-document domain("dev.twitch.tv"),
  url-prefix("https://discuss.dev.twitch.com/embed/topics") {
  :root {
    @media (prefers-color-scheme: light) {
      #sarnai-theme(@lightFlavor);
    }
    @media (prefers-color-scheme: dark) {
      #sarnai-theme(@darkFlavor);
    }
  }

  #sarnai-theme(@flavor) {
    @sarnai: @sarnai-theme[@@flavor][@sarnai];
    @sarnai: @sarnai-theme[@@flavor][@sarnai];
    @sarnai: @sarnai-theme[@@flavor][@sarnai];
    @yargui: @sarnai-theme[@@flavor][@yargui];
    @anis: @sarnai-theme[@@flavor][@anis];
    @anis: @sarnai-theme[@@flavor][@anis];
    @chatsalgan: @sarnai-theme[@@flavor][@chatsalgan];
    @els: @sarnai-theme[@@flavor][@els];
    @uvs: @sarnai-theme[@@flavor][@uvs];
    @mus: @sarnai-theme[@@flavor][@mus];
    @mus: @sarnai-theme[@@flavor][@mus];
    @nuur: @sarnai-theme[@@flavor][@nuur];
    @nuur: @sarnai-theme[@@flavor][@nuur];
    @yargui: @sarnai-theme[@@flavor][@yargui];
    @text: @sarnai-theme[@@flavor][@text];
    @text: @sarnai-theme[@@flavor][@text];
    @subtle: @sarnai-theme[@@flavor][@subtle];
    @subtle: @sarnai-theme[@@flavor][@subtle];
    @muted: @sarnai-theme[@@flavor][@muted];
    @muted: @sarnai-theme[@@flavor][@muted];
    @overlay: @sarnai-theme[@@flavor][@overlay];
    @overlay: @sarnai-theme[@@flavor][@overlay];
    @surface: @sarnai-theme[@@flavor][@surface];
    @surface: @sarnai-theme[@@flavor][@surface];
    @base: @sarnai-theme[@@flavor][@base];
    @base: @sarnai-theme[@@flavor][@base];
    @accent: @sarnai-theme[@@flavor][@@accentColor];

    --ctp-rosewater: @sarnai;
    --ctp-flamingo: @sarnai;
    --ctp-pink: @sarnai;
    --ctp-mauve: @yargui;
    --ctp-red: @anis;
    --ctp-maroon: @anis;
    --ctp-peach: @chatsalgan;
    --ctp-yellow: @els;
    --ctp-green: @uvs;
    --ctp-teal: @mus;
    --ctp-sky: @mus;
    --ctp-sapphire: @nuur;
    --ctp-blue: @nuur;
    --ctp-lavender: @yargui;
    --ctp-text: @text;
    --ctp-subtext1: @text;
    --ctp-subtext0: @subtle;
    --ctp-overlay2: @subtle;
    --ctp-overlay1: @muted;
    --ctp-overlay0: @muted;
    --ctp-surface2: @overlay;
    --ctp-surface1: @overlay;
    --ctp-surface0: @surface;
    --ctp-base: @surface;
    --ctp-mantle: @base;
    --ctp-crust: @base;

    &,
    body {
      color: @text !important;
      background: @surface;
      --primary-medium: @text;
      --primary-low: @surface;
      scrollbar-color: @surface @base;
    }

    a.btn,
    button.btn {
      border-color: @accent;
      background: @accent !important;
      color: @surface !important;
    }

    a.btn:hover,
    button.btn:hover {
      background: fade(@accent, 80%) !important;
    }

    /* Recent announcements */
    .topics-list .topic-list-item .main-link a {
      color: @accent;
    }

    .topic-created-at,
    .topic-last-posted-at,
    .topic-like-count,
    .topic-post-count {
      color: @subtle !important;
    }

    /* Header */
    .nav__container,
    .dev-top-nav {
      background: @base !important;

      .tw-link,
      .dev-top-nav__nav-items-container {
        color: @text !important;
        background: @base !important;
      }
      .online {
        border-color: @base !important;
      }
      a.btn.light {
        background: fade(@accent, 10%) !important;
        color: @text !important;
      }
      .nav__links a {
        color: @text;

        &:hover {
          color: @subtle;
        }
        &.active {
          color: @accent;
          border-color: @accent;
        }
      }
      .nav__logo svg path {
        fill: @text;
      }
    }

    /* Footers */
    .footer,
    .dev-footer,
    .subscribe-footer {
      h5,
      p,
      a,
      div {
        color: @text !important;
      }
      a:hover {
        color: @accent !important;
      }

      svg path {
        fill: @text !important;
      }

      background: @base;
    }

    .bright-cta {
      * {
        color: @base !important;
      }
      background: @accent;
    }
    .content-alternate-2 {
      background: @surface;
    }

    .sandbox-tab {
      color: @text !important;
    }

    .why-twitch ul li {
      background: @surface;
      border-color: @surface !important;
    }

    .sandbox-tab.active {
      color: @accent !important;
      border-color: @accent !important;
    }

    .hero,
    .extension-cta,
    .subscribe-footer {
      background: @base;
    }

    thead tr th {
      border-color: @surface;
      background: @base;
    }

    tbody tr td {
      border-color: @surface;
    }

    tbody tr:nth-child(odd) {
      background: @surface !important;
    }
    tbody tr:nth-child(even) {
      background: @base !important;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    hr {
      color: @text !important;
      border-color: @surface !important;
    }

    .right-code {
      p {
        color: @subtle;
      }
      background-color: @surface !important;
    }

    blockquote {
      border-color: @accent;
      background: @base;
    }

    .content,
    .main,
    .topics-list,
    .doc-content {
      background: @surface;
      border-color: @surface !important;
      a {
        color: @accent;
      }
      border-bottom-color: @surface !important;
      border-image: none;
      -webkit-border-image: none;
    }

    code {
      border-color: @accent !important;
      background: fade(@accent, 5%) !important;
      color: @text !important;
    }

    /* Code */
    .right-code pre,
    pre.highlight,
    pre {
      border-color: @base !important;
      background: @base !important;
      code {
        background: transparent !important;
        color: @text !important;
      }
    }

    /* Pills */
    .pill-new {
      color: @surface !important;
      background: @accent !important;
    }
    .pill-beta {
      color: @surface !important;
      background: @els !important;
    }

    /* Navbar */
    .sidebar {
      background: @base !important;
      dl {
        border-color: @surface !important;
      }
      dt a,
      dl dd a {
        color: @text !important;
      }
      dl dd a.active-highlight {
        color: @accent !important;
      }
      dl dd a.active-highlight::before {
        border-left-color: @accent !important;
      }
      dt a:hover {
        background: @surface !important;
      }

      /* Search */

      input {
        color: @text;
        &::placeholder {
          color: @subtle;
        }
        &:focus {
          background: @base !important;
          box-shadow: 0 0 3px 1px fade(@accent, 70%);
          color: @text;
        }
      }

      .search-icon svg path {
        fill: @text !important;
      }

      .algolia-autocomplete {
        .algolia-docsearch-suggestion--category-header {
          color: @text !important;
          background: @base !important;
          border-color: @surface !important;
        }

        .algolia-docsearch-suggestion--highlight {
          background: @accent !important;
          color: @surface !important;
        }

        .algolia-docsearch-suggestion--content {
          background: @base !important;
        }

        .algolia-docsearch-suggestion--title {
          color: @text !important;
        }

        .algolia-docsearch-suggestion--text {
          color: @subtle !important;
        }

        .ds-suggestion.ds-cursor .algolia-docsearch-suggestion--content {
          .algolia-docsearch-suggestion--title,
          .algolia-docsearch-suggestion--text {
            background: @base !important;
            .algolia-docsearch-suggestion--highlight {
              background: @surface !important;
            }
          }
        }
      }
    }

    ul.grid li.story {
      h4 a,
      a.btn {
        color: @text !important;
      }
      a {
        color: @accent !important;
      }
      .story__links a {
        color: @surface !important;
      }

      border-color: @surface;
    }

    .submission .relative .outer {
      svg path {
        fill: @text;
      }
      button {
        border-color: @accent !important;
      }

      .tag button {
        background: @accent !important;
        border-color: @accent !important;
      }

      .author {
        color: @subtle !important;
      }
      background: @base;
    }
  }
}

/* deno-fmt-ignore */
@sarnai-theme: {
  @ovol:   { @sarnai: #b93d4d; @anis: #cc2929; @chatsalgan: #da730c; @els: #df9b23; @uvs: #4c890f; @nuur: #0a728c; @mus: #12adad; @yargui: #a353c6; @text: #13201b; @subtle: #446f5e; @muted: #81b19e; @overlay: #90bbaa; @surface: #b6d2c7; @base: #dceae4; };
  @khavar: { @sarnai: #f0c3cb; @anis: #ff6b6b; @chatsalgan: #e5951a; @els: #cca24d; @uvs: #80b946; @nuur: #2b879e; @mus: #9deaea; @yargui: #d5b3e5; @text: #dfece7; @subtle: #90bbaa; @muted: #4e7e6b; @overlay: #2d493d; @surface: #21362d; @base: #172620; };
};
